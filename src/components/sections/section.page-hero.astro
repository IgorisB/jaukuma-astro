---
import ControlNavbarDesktop from '../controls/control.navbar.desktop.astro';
import ControlNavbarMobile from '../controls/control.navbar.mobile.astro';
import ControlStickyHeaderMobile from '../controls/control.sticky-header.mobile.astro';
import { useTranslations, getLangFromUrl } from '../../lib/utils';

interface Props {
  backgroundImage: string;
  title: string;
  description: string;
  locale?: string;
}

const { backgroundImage, title, description } = Astro.props;
const lang = Astro.props.locale || getLangFromUrl(Astro.url);
---

<section class="page-hero-section parallax-hero">
  <!-- Parallax Background Layer -->
  <div class="parallax-background" style={`background-image: linear-gradient(rgba(50, 62, 72, 0.6), rgba(50, 62, 72, 0.6)), url(${backgroundImage})`}></div>
  
  <!-- Parallax Content Layer -->
  <div class="parallax-content">
    <!-- Navigation Bar -->
    <ControlNavbarDesktop locale={lang} />
    <ControlNavbarMobile locale={lang} />
    
    <!-- Sticky Mobile Header -->
    <ControlStickyHeaderMobile locale={lang} />
    
    <!-- Hero Content -->
    <div class="page-hero-content">
        <h1 class="page-title color-white" set:html={title}></h1>
        <p class="page-description color-white" set:html={description}></p>
    </div>
  </div>
</section>

<script>
  // Import and initialize parallax controller
  import '../../scripts/parallax.ts';
</script>

<style>
  .page-hero-section {
    @apply relative flex flex-col items-center text-light gap-36 h-[36.9375rem];
    @apply p-3 pb-6 md:px-12 md:py-6 md:h-[30rem] lg:px-36 lg:py-9 lg:pb-36 lg:h-[36.9375rem];
  }

  /* Parallax content maintains flex layout */
  .parallax-content {
    @apply flex flex-col items-center gap-36 md:gap-16 w-full h-full;
  }

  /* Hero Content */
  .page-hero-content {
    @apply flex flex-col justify-center items-start w-full mx-auto gap-10 text-left;
  }

  .page-title {
    @apply font-serif font-normal leading-none text-light m-0 text-left;
    @apply text-[3rem] md:text-[4rem] lg:text-[5.3125rem];
  }

  .page-description {
    @apply font-sans font-normal text-sm text-light m-0 text-left max-w-[27.25rem];
    line-height: 1.257;
  }

  @media (max-width: 768px) {
    .page-title {
      @apply text-center;
    }

    .page-description {
      @apply text-center;
    }
  }
</style>
